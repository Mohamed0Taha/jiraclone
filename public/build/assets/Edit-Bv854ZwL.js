import{j as e}from"./index-BgEJ3fxA.js";import{r as b}from"./ProjectReportDialog-DJSS4N_t.js";import{u as F,H as O}from"./app-K9NsoLMf.js";import{A as N}from"./AuthenticatedLayout-BoAa4njZ.js";import{S as G}from"./Save-D1sKxa3V.js";import{A as H}from"./ArrowBack-BADPg0TL.js";import{A as I}from"./AutoAwesome-C8YBcAsX.js";import{K}from"./Key-B9enTFzV.js";import{T as U,D as V}from"./Title-CM3NkCxE.js";import{G as q,C as Y}from"./GroupsRounded-1FKM2HnB.js";import{P as Z}from"./PublicRounded-CacxeP0d.js";import{c as v}from"./createSvgIcon-BJOZcqxU.js";import{P as J}from"./PersonRounded-B2o1VDpb.js";import{F as Q}from"./FlagRounded-B2nmnq5y.js";import{C as P}from"./CalendarMonthRounded-D2pw7wm1.js";import{R as X}from"./RestartAltRounded-D4gs6ejc.js";import{u as ee,T as h}from"./Typography-D7k_4FBJ.js";import{B as u}from"./Box-DwDErR6p.js";import{C as z}from"./Container-CINNDH99.js";import{B as te,S as re,a as ae,b as oe}from"./Stepper-DLGaimn0.js";import{L as T}from"./Link-Cm4ksNIx.js";import{S as c}from"./Stack-8UQV77y9.js";import{C as A}from"./Chip-21CA6oxg.js";import{F as se}from"./Fade-DhaX7TN9.js";import{P as ne}from"./Paper-PFfIOqkm.js";import{L as ie}from"./LinearProgress-DS1Mq4qD.js";import{I as le}from"./IconButton-MFFsjt5V.js";import{D as me}from"./Divider-Mh942rqT.js";import{T as d}from"./TextField-BZLKsJ9m.js";import{I as p}from"./InputAdornment-BMgQdgnP.js";import{G as m}from"./Grid-DNDvuRa5.js";import{B as f}from"./Button-awGqnw0r.js";import{M as x}from"./MenuItem-CFfd6fkg.js";import{A as de}from"./Alert-AqF1eoq9.js";import{a as i}from"./createTheme-C_kE-Qd2.js";import"./transition-BoHI2LEi.js";import"./CookieConsent-DEMz9Qt1.js";import"./Slide-BpTZt6Xy.js";import"./getReactElementRef-F5A8c8Er.js";import"./index-CaqUbZRR.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-XbzhRCTS.js";import"./Card-f4gJA82V.js";import"./DefaultPropsProvider-Bua-nAaA.js";import"./Close-CE36E4Lb.js";import"./useThemeProps-BWPYVe8w.js";import"./ButtonBase-Cf3WRSsW.js";import"./isFocusVisible-B8k4qzLc.js";import"./useSlotProps-5DvMlV7h.js";import"./useSlot-CiX-lWvG.js";import"./index-Cvm9KgRT.js";import"./CircularProgress-RchlJGKc.js";import"./dividerClasses-C37mlFxW.js";import"./FormControl-9Ne_wXge.js";import"./isMuiElement-BEUJm6md.js";import"./List-D9XOj4nK.js";import"./Grow---KOMtVK.js";import"./Modal-DIrGbC0Y.js";import"./Portal-DfkSyL9i.js";import"./useControlled-LNSG5UB_.js";import"./listItemTextClasses-DfQra0jB.js";const w=v(e.jsx("path",{d:"m14.65 4.98-5-1.75c-.42-.15-.88-.15-1.3-.01L4.36 4.56C3.55 4.84 3 5.6 3 6.46v11.85c0 1.41 1.41 2.37 2.72 1.86l2.93-1.14c.22-.09.47-.09.69-.01l5 1.75c.42.15.88.15 1.3.01l3.99-1.34c.81-.27 1.36-1.04 1.36-1.9V5.69c0-1.41-1.41-2.37-2.72-1.86l-2.93 1.14c-.22.08-.46.09-.69.01M15 18.89l-6-2.11V5.11l6 2.11z"})),pe=v(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09v.58c0 .73-.6 1.33-1.33 1.33h-.01c-.73 0-1.33-.6-1.33-1.33v-.6c-1.33-.28-2.51-1.01-3.01-2.24-.23-.55.2-1.16.8-1.16h.24c.37 0 .67.25.81.6.29.75 1.05 1.27 2.51 1.27 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21v-.6c0-.73.6-1.33 1.33-1.33h.01c.73 0 1.33.6 1.33 1.33v.62c1.38.34 2.25 1.2 2.63 2.26.2.55-.22 1.13-.81 1.13h-.26c-.37 0-.67-.26-.77-.62-.23-.76-.86-1.25-2.12-1.25-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.02 1.83-1.39 2.83-3.13 3.16"})),ce=v(e.jsx("path",{d:"M12 5.99 19.53 19H4.47zM2.74 18c-.77 1.33.19 3 1.73 3h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0zM11 11v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1m0 5h2v2h-2z"}));function vt({auth:B,project:r}){const l=ee(),{data:a,setData:s,patch:R,processing:j,errors:o,reset:$,transform:y}=F({name:r?.name||"",key:r?.key||"",description:r?.description||"",start_date:r?.start_date||"",end_date:r?.end_date||"",meta:{project_type:r?.meta?.project_type||"",domain:r?.meta?.domain||"",area:r?.meta?.area||"",location:r?.meta?.location||"",team_size:r?.meta?.team_size??"",budget:r?.meta?.budget||"",primary_stakeholder:r?.meta?.primary_stakeholder||"",objectives:r?.meta?.objectives||"",constraints:r?.meta?.constraints||""}});b.useEffect(()=>{y(t=>({...t,key:(t.key||"").toUpperCase().replace(/[^A-Z0-9]/g,"").slice(0,12)}))},[y]);const[g,k]=b.useState(0),S=["Basics","Context","Description & Preview"],_=()=>k(t=>Math.min(S.length-1,t+1)),C=()=>k(t=>Math.max(0,t-1)),M=t=>{t.preventDefault(),R(route("projects.update",r.id),{preserveScroll:!0,onSuccess:()=>{}})},W=`linear-gradient(115deg, ${i(l.palette.primary.main,.85)} 0%, ${i(l.palette.secondary.main,.8)} 60%, ${i(l.palette.primary.dark,.85)} 100%)`,D=b.useMemo(()=>{const t=[],n=a.meta||{};return n.project_type&&t.push(`Type: ${n.project_type}`),n.domain&&t.push(`Domain: ${n.domain}`),n.area&&t.push(`Area: ${n.area}`),n.location&&t.push(`Location: ${n.location}`),n.team_size&&t.push(`Team size: ${n.team_size}`),a.start_date&&t.push(`Start: ${a.start_date}`),a.end_date&&t.push(`End: ${a.end_date}`),n.budget&&t.push(`Budget: ${n.budget}`),n.primary_stakeholder&&t.push(`Primary stakeholder: ${n.primary_stakeholder}`),n.objectives&&t.push(`Objectives: ${n.objectives}`),n.constraints&&t.push(`Constraints: ${n.constraints}`),e.jsx(u,{sx:{mt:2,px:2,py:1.5,borderRadius:2,border:`1px dashed ${i(l.palette.primary.main,.35)}`,background:i(l.palette.primary.main,.05)},children:t.length===0?e.jsx(h,{variant:"body2",color:"text.secondary",children:"No context set yet."}):e.jsxs(u,{children:[e.jsx(h,{variant:"subtitle2",sx:{fontWeight:700,mb:.5},children:"Context Summary:"}),t.map((L,E)=>e.jsxs(h,{variant:"body2",sx:{display:"block"},children:["• ",L]},E))]})})},[a,l]);return e.jsxs(e.Fragment,{children:[e.jsx(O,{title:`Edit Project – ${r?.name||""}`}),e.jsxs(N,{user:B?.user,children:[e.jsxs(u,{sx:{background:W,color:"#fff",pt:{xs:7,md:9},pb:{xs:8,md:10},position:"relative",overflow:"hidden"},children:[e.jsx(u,{"aria-hidden":!0,sx:{position:"absolute",top:-120,left:-80,width:440,height:440,borderRadius:"50%",background:i("#fff",.12),filter:"blur(90px)"}}),e.jsx(u,{"aria-hidden":!0,sx:{position:"absolute",bottom:-140,right:-120,width:500,height:500,borderRadius:"50%",background:i("#fff",.14),filter:"blur(100px)"}}),e.jsxs(z,{maxWidth:"md",sx:{position:"relative"},children:[e.jsxs(te,{"aria-label":"breadcrumb",sx:{"& a, & .MuiTypography-root":{color:i("#fff",.9),fontSize:14}},children:[e.jsx(T,{underline:"hover",color:"inherit",href:"/dashboard",sx:{fontWeight:500},children:"Dashboard"}),e.jsx(T,{underline:"hover",color:"inherit",href:"/projects",sx:{fontWeight:500},children:"Projects"}),e.jsx(h,{color:"inherit",sx:{fontWeight:600},children:"Edit"})]}),e.jsx(h,{variant:"h3",fontWeight:700,sx:{mt:3,letterSpacing:"-0.5px",textShadow:"0 4px 22px rgba(0,0,0,0.25)"},children:"Edit Project"}),e.jsx(h,{variant:"h6",sx:{mt:2,maxWidth:720,color:i("#fff",.92)},children:"Update the project basics, context, and description. Your changes will improve AI suggestions across the app."}),e.jsxs(c,{direction:"row",spacing:1.5,mt:3,flexWrap:"wrap",children:[e.jsx(A,{icon:e.jsx(I,{}),label:"Context enhances AI",sx:{bgcolor:i("#000",.25),color:"#fff","& .MuiChip-icon":{color:"#fff"},backdropFilter:"blur(4px)"}}),e.jsx(A,{label:"Changes are saved securely",sx:{bgcolor:i("#fff",.16),color:"#fff",backdropFilter:"blur(4px)"}})]})]})]}),e.jsx(u,{sx:{bgcolor:"background.default",py:{xs:5,md:8},minHeight:"60vh"},children:e.jsx(z,{maxWidth:"md",children:e.jsx(se,{in:!0,timeout:500,children:e.jsxs(ne,{elevation:0,sx:{p:{xs:3,sm:5},borderRadius:4,position:"relative",border:`1px solid ${i(l.palette.divider,.7)}`,background:l.palette.mode==="light"?"linear-gradient(145deg,#ffffff,#f8f9fb)":i(l.palette.background.paper,.7),backdropFilter:"blur(6px)",boxShadow:l.palette.mode==="light"?"0 4px 18px -4px rgba(0,0,0,.12)":"0 4px 18px -6px rgba(0,0,0,.7)",overflow:"hidden"},children:[j&&e.jsx(ie,{sx:{position:"absolute",left:0,top:0,width:"100%",borderTopLeftRadius:16,borderTopRightRadius:16}}),e.jsxs(c,{direction:"row",alignItems:"center",spacing:1,mb:2,sx:{flexWrap:"wrap"},children:[e.jsx(le,{"aria-label":"Back to projects",size:"small",href:`/projects/${r.id}/tasks`,sx:{bgcolor:i(l.palette.primary.main,.08),"&:hover":{bgcolor:i(l.palette.primary.main,.18)}},children:e.jsx(H,{fontSize:"small"})}),e.jsx(h,{variant:"h5",fontWeight:700,children:"Project Details"})]}),e.jsx(me,{sx:{mb:3}}),e.jsx(re,{activeStep:g,alternativeLabel:!0,sx:{mb:4},children:S.map(t=>e.jsx(ae,{children:e.jsx(oe,{children:t})},t))}),e.jsxs(u,{component:"form",onSubmit:M,noValidate:!0,autoComplete:"off",children:[g===0&&e.jsxs(c,{spacing:3,children:[e.jsx(d,{label:"Project Name",required:!0,value:a.name,onChange:t=>s("name",t.target.value),error:!!o.name,helperText:o.name,InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(U,{fontSize:"small"})})}}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(d,{label:"Project Key",placeholder:"ABC",value:a.key,onChange:t=>s("key",t.target.value),error:!!o.key,helperText:o.key||"Uppercase letters & digits only (max 12).",InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(K,{fontSize:"small"})}),inputProps:{style:{letterSpacing:"2px"}}}})}),e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(d,{label:"Team Size",type:"number",value:a.meta.team_size,onChange:t=>s("meta",{...a.meta,team_size:t.target.value?Number(t.target.value):""}),error:!!o?.["meta.team_size"],helperText:o?.["meta.team_size"],InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(q,{fontSize:"small"})})}})})]}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(d,{label:"Start Date",type:"date",value:a.start_date||"",onChange:t=>s("start_date",t.target.value),error:!!o.start_date,helperText:o.start_date,InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(P,{fontSize:"small"})})}})}),e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(d,{label:"End Date",type:"date",value:a.end_date||"",onChange:t=>s("end_date",t.target.value),error:!!o.end_date,helperText:o.end_date,InputLabelProps:{shrink:!0},InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(P,{fontSize:"small"})})}})})]}),e.jsx(c,{direction:"row",justifyContent:"flex-end",spacing:1.5,mt:1,children:e.jsx(f,{variant:"contained",onClick:_,sx:{textTransform:"none",fontWeight:700},children:"Next"})})]}),g===1&&e.jsxs(c,{spacing:3,children:[e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsxs(d,{label:"Project Type",value:a.meta.project_type,onChange:t=>s("meta",{...a.meta,project_type:t.target.value}),error:!!o?.["meta.project_type"],helperText:o?.["meta.project_type"],InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(Y,{fontSize:"small"})})},select:!0,children:[e.jsx(x,{value:"",children:"—"}),e.jsx(x,{value:"Software",children:"Software"}),e.jsx(x,{value:"Marketing",children:"Marketing"}),e.jsx(x,{value:"Construction",children:"Construction"}),e.jsx(x,{value:"Event",children:"Event"}),e.jsx(x,{value:"Research",children:"Research"}),e.jsx(x,{value:"Operations",children:"Operations"}),e.jsx(x,{value:"Other",children:"Other"})]})}),e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(d,{label:"Domain / Industry",value:a.meta.domain,onChange:t=>s("meta",{...a.meta,domain:t.target.value}),error:!!o?.["meta.domain"],helperText:o?.["meta.domain"],InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(Z,{fontSize:"small"})})}})})]}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(d,{label:"Area / Department",value:a.meta.area,onChange:t=>s("meta",{...a.meta,area:t.target.value}),error:!!o?.["meta.area"],helperText:o?.["meta.area"],InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(w,{fontSize:"small"})})}})}),e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(d,{label:"Location",value:a.meta.location,onChange:t=>s("meta",{...a.meta,location:t.target.value}),error:!!o?.["meta.location"],helperText:o?.["meta.location"],InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(w,{fontSize:"small"})})}})})]}),e.jsxs(m,{container:!0,spacing:2,children:[e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(d,{label:"Budget",value:a.meta.budget,onChange:t=>s("meta",{...a.meta,budget:t.target.value}),error:!!o?.["meta.budget"],helperText:o?.["meta.budget"],InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(pe,{fontSize:"small"})})}})}),e.jsx(m,{item:!0,xs:12,sm:6,children:e.jsx(d,{label:"Primary Stakeholder",value:a.meta.primary_stakeholder,onChange:t=>s("meta",{...a.meta,primary_stakeholder:t.target.value}),error:!!o?.["meta.primary_stakeholder"],helperText:o?.["meta.primary_stakeholder"],InputProps:{startAdornment:e.jsx(p,{position:"start",children:e.jsx(J,{fontSize:"small"})})}})})]}),e.jsx(d,{label:"Objectives",value:a.meta.objectives,onChange:t=>s("meta",{...a.meta,objectives:t.target.value}),error:!!o?.["meta.objectives"],helperText:o?.["meta.objectives"],multiline:!0,minRows:3,InputProps:{startAdornment:e.jsx(p,{position:"start",sx:{alignSelf:"flex-start",mt:1},children:e.jsx(Q,{fontSize:"small"})})}}),e.jsx(d,{label:"Constraints",value:a.meta.constraints,onChange:t=>s("meta",{...a.meta,constraints:t.target.value}),error:!!o?.["meta.constraints"],helperText:o?.["meta.constraints"],multiline:!0,minRows:3,InputProps:{startAdornment:e.jsx(p,{position:"start",sx:{alignSelf:"flex-start",mt:1},children:e.jsx(ce,{fontSize:"small"})})}}),e.jsxs(c,{direction:"row",justifyContent:"space-between",spacing:1.5,mt:1,children:[e.jsx(f,{variant:"outlined",onClick:C,sx:{textTransform:"none",fontWeight:600},children:"Back"}),e.jsx(f,{variant:"contained",onClick:_,sx:{textTransform:"none",fontWeight:700},children:"Next"})]})]}),g===2&&e.jsxs(c,{spacing:3,children:[e.jsx(de,{severity:"info",icon:e.jsx(I,{fontSize:"small"}),sx:{borderRadius:3,bgcolor:l.palette.mode==="light"?i(l.palette.info.light,.25):i(l.palette.info.dark,.35)},children:"The context below will be appended to your description as a structured summary to help AI features."}),e.jsx(d,{label:"Project Description",placeholder:"Purpose, scope, goals, success criteria...",value:a.description,onChange:t=>s("description",t.target.value),error:!!o.description,helperText:o.description,multiline:!0,minRows:5,InputProps:{startAdornment:e.jsx(p,{position:"start",sx:{alignSelf:"flex-start",mt:1},children:e.jsx(V,{fontSize:"small",sx:{mt:"2px"}})})}}),D,e.jsxs(c,{direction:"row",justifyContent:"space-between",spacing:1.5,mt:1,children:[e.jsx(f,{variant:"outlined",onClick:C,sx:{textTransform:"none",fontWeight:600},children:"Back"}),e.jsxs(c,{direction:"row",spacing:1.5,children:[e.jsx(f,{type:"button",variant:"text",color:"warning",disabled:j,onClick:()=>{$(),s("name",r?.name||""),s("key",r?.key||""),s("description",r?.description||""),s("start_date",r?.start_date||""),s("end_date",r?.end_date||""),s("meta",{project_type:r?.meta?.project_type||"",domain:r?.meta?.domain||"",area:r?.meta?.area||"",location:r?.meta?.location||"",team_size:r?.meta?.team_size??"",budget:r?.meta?.budget||"",primary_stakeholder:r?.meta?.primary_stakeholder||"",objectives:r?.meta?.objectives||"",constraints:r?.meta?.constraints||""})},startIcon:e.jsx(X,{}),sx:{textTransform:"none"},children:"Reset changes"}),e.jsx(f,{type:"submit",variant:"contained",startIcon:e.jsx(G,{}),disabled:j,sx:{textTransform:"none",fontWeight:700,px:3,boxShadow:"0 6px 18px -6px rgba(0,0,0,.25), 0 8px 32px -12px rgba(0,0,0,.25)"},children:j?"Saving...":"Save Changes"})]})]})]})]})]})})})})]})]})}export{vt as default};
