import{j as e}from"./index-BgEJ3fxA.js";import{r}from"./ProjectReportDialog-DJSS4N_t.js";import"./app-K9NsoLMf.js";import{g as E}from"./csrf-CrwjxjsF.js";import{u as L,T as i}from"./Typography-D7k_4FBJ.js";import{B as h}from"./Box-DwDErR6p.js";import{S as P}from"./Stack-8UQV77y9.js";import{C}from"./Card-f4gJA82V.js";import{L as O}from"./LinearProgress-DS1Mq4qD.js";import{C as w}from"./CardContent-Bdo1cAqR.js";import{A}from"./AutoAwesome-C8YBcAsX.js";import{C as R}from"./Chip-21CA6oxg.js";import{c as y}from"./createSvgIcon-BJOZcqxU.js";import{A as f}from"./Alert-AqF1eoq9.js";import{B}from"./Button-awGqnw0r.js";import{a as s}from"./createTheme-C_kE-Qd2.js";import"./DefaultPropsProvider-Bua-nAaA.js";import"./useThemeProps-BWPYVe8w.js";import"./Paper-PFfIOqkm.js";import"./index-Cvm9KgRT.js";import"./useSlot-CiX-lWvG.js";import"./ButtonBase-Cf3WRSsW.js";import"./isFocusVisible-B8k4qzLc.js";import"./IconButton-MFFsjt5V.js";import"./CircularProgress-RchlJGKc.js";const U=y(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"})),X=y(e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.996.996 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"})),S=y(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"})),xe=({onDocumentAnalyzed:g,onManualCreate:D})=>{const t=L(),[c,m]=r.useState(!1),[x,j]=r.useState(!1),[u,l]=r.useState(""),[b,k]=r.useState("");r.useEffect(()=>{const o=a=>{a.detail?.reason==="missing_core_fields"&&k("AI could not reliably extract the project name or description. You can retry with a clearer document or proceed with manual creation.")};return window.addEventListener("project-ai-empty",o),()=>window.removeEventListener("project-ai-empty",o)},[]);const p=r.useCallback(async o=>{if(!o)return;const a=["text/plain","application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/rtf","text/markdown","text/x-markdown","text/csv","application/csv","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],W=o.name.toLowerCase(),M=[".txt",".pdf",".doc",".docx",".rtf",".md",".markdown",".csv",".xls",".xlsx"].some(d=>W.endsWith(d));if(!a.includes(o.type)&&!M){l("Allowed types: TXT, PDF, DOC, DOCX, RTF, MD, CSV, XLS, XLSX (max 5MB).");return}if(o.size>5*1024*1024){l("File size must be less than 5MB.");return}j(!0),l("");const v=new FormData;v.append("document",o);try{const n=await(await fetch(route("projects.analyze-document"),{method:"POST",body:v,headers:{"X-CSRF-TOKEN":E()||"",Accept:"application/json"},credentials:"same-origin"})).json();console.log("Full API response:",n),n.success?(console.log("AI Analysis Result:",n.data),console.log("Available result.data keys:",Object.keys(n.data)),console.log("Full result structure:",n),g(n.data)):(console.error("API Error:",n.message),l(n.message||"Failed to analyze document"))}catch(d){console.error("Document upload error:",d),l("Failed to upload and analyze document. Please try again.")}finally{j(!1)}},[g]),I=r.useCallback(o=>{o.preventDefault(),m(!1);const a=Array.from(o.dataTransfer.files);a.length>0&&p(a[0])},[p]),z=r.useCallback(o=>{o.preventDefault(),m(!0)},[]),F=r.useCallback(o=>{o.preventDefault(),m(!1)},[]),T=r.useCallback(o=>{const a=o.target.files?.[0];a&&p(a)},[p]);return e.jsxs(h,{sx:{py:2},children:[e.jsx(i,{variant:"h5",sx:{mb:2,fontWeight:700,color:t.palette.text.primary,textAlign:"center"},children:"How would you like to create your project?"}),e.jsx(i,{variant:"body1",sx:{mb:4,color:t.palette.text.secondary,textAlign:"center",maxWidth:600,mx:"auto"},children:"Choose to upload a project requirements document for AI analysis, or create your project manually step by step."}),e.jsxs(P,{spacing:3,sx:{maxWidth:800,mx:"auto"},children:[e.jsxs(C,{elevation:0,sx:{border:`2px solid ${c?t.palette.primary.main:s(t.palette.primary.main,.2)}`,borderRadius:3,transition:"all 0.3s ease",position:"relative",overflow:"hidden","&:hover":{borderColor:t.palette.primary.main,boxShadow:`0 8px 30px ${s(t.palette.primary.main,.15)}`,transform:"translateY(-2px)"}},onDrop:I,onDragOver:z,onDragLeave:F,children:[x&&e.jsx(O,{sx:{position:"absolute",top:0,left:0,right:0,zIndex:1}}),e.jsxs(w,{sx:{p:4,textAlign:"center"},children:[e.jsxs(h,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mb:2,gap:1},children:[e.jsx(A,{sx:{fontSize:32,color:t.palette.primary.main}}),e.jsx(R,{label:"AI Powered",size:"small",sx:{bgcolor:s(t.palette.primary.main,.1),color:t.palette.primary.main,fontWeight:600}})]}),e.jsx(i,{variant:"h6",sx:{mb:2,fontWeight:600,color:t.palette.text.primary},children:"Upload Project Requirements Document"}),e.jsx(i,{variant:"body2",sx:{mb:3,color:t.palette.text.secondary,maxWidth:400,mx:"auto"},children:"Upload a document and let AI extract project details, timeline, objectives, and constraints automatically."}),e.jsxs(h,{sx:{border:`2px dashed ${c?t.palette.primary.main:s(t.palette.grey[400],.5)}`,borderRadius:2,p:3,mb:3,bgcolor:c?s(t.palette.primary.main,.05):s(t.palette.grey[50],.5),cursor:"pointer",transition:"all 0.3s ease"},onClick:()=>document.getElementById("document-input")?.click(),children:[e.jsx(U,{sx:{fontSize:48,color:t.palette.primary.main,mb:2}}),e.jsx(i,{variant:"body2",sx:{mb:1,fontWeight:500},children:c?"Drop your document here":"Click to browse or drag & drop your document"}),e.jsx(i,{variant:"caption",color:"text.secondary",children:"Supports: PDF, Word (.doc/.docx), Text (.txt), RTF â€¢ Max 5MB"})]}),e.jsx("input",{id:"document-input",type:"file",accept:".txt,.pdf,.doc,.docx,.rtf,.md,.markdown,.csv,.xls,.xlsx",style:{display:"none"},onChange:T,disabled:x}),u&&e.jsx(f,{severity:"error",sx:{mb:2,textAlign:"left"},icon:e.jsx(S,{}),children:u}),b&&!u&&e.jsx(f,{severity:"warning",sx:{mb:2,textAlign:"left"},icon:e.jsx(S,{}),children:b}),x&&e.jsx(f,{severity:"info",sx:{mb:2,textAlign:"left"},icon:e.jsx(A,{}),children:"Analyzing your document with AI... This may take a few moments."})]})]}),e.jsx(C,{elevation:0,sx:{border:`2px solid ${s(t.palette.grey[400],.2)}`,borderRadius:3,cursor:"pointer",transition:"all 0.3s ease","&:hover":{borderColor:s(t.palette.secondary.main,.5),boxShadow:`0 8px 30px ${s(t.palette.secondary.main,.1)}`,transform:"translateY(-2px)"}},onClick:D,children:e.jsxs(w,{sx:{p:4,textAlign:"center"},children:[e.jsx(X,{sx:{fontSize:32,color:t.palette.secondary.main,mb:2}}),e.jsx(i,{variant:"h6",sx:{mb:2,fontWeight:600,color:t.palette.text.primary},children:"Create Project Manually"}),e.jsx(i,{variant:"body2",sx:{mb:3,color:t.palette.text.secondary,maxWidth:400,mx:"auto"},children:"Fill out the project details step by step using our guided form with basics, scope, and objectives."}),e.jsx(B,{variant:"outlined",color:"secondary",sx:{mt:2},children:"Start Manual Creation"})]})})]})]})};export{xe as default};
