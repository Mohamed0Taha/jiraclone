import{j as e}from"./index-BgEJ3fxA.js";import{r as x}from"./ProjectReportDialog-DJSS4N_t.js";import{H as te,r as m}from"./app-K9NsoLMf.js";import{A as ne}from"./AuthenticatedLayout-BoAa4njZ.js";import{P as ae,C as $,I as se}from"./ImageModal-D8IPxvIn.js";import{C as de}from"./Container-CINNDH99.js";import{P as Y}from"./Paper-PFfIOqkm.js";import{B as t}from"./Box-DwDErR6p.js";import{S as n}from"./Stack-8UQV77y9.js";import{T as o}from"./Typography-D7k_4FBJ.js";import{B as c}from"./Button-awGqnw0r.js";import{I as S}from"./IconButton-MFFsjt5V.js";import{D as G}from"./Delete-hxgZVV99.js";import{E as N}from"./Edit-KFQoxZFW.js";import{C as I}from"./Chip-21CA6oxg.js";import{T as f,I as _,S as z}from"./TextField-BZLKsJ9m.js";import{D as le}from"./Divider-Mh942rqT.js";import{D as ce,a as xe}from"./DialogContent-DSMMXfBC.js";import{D as me}from"./DialogTitle-CslrqFxR.js";import{a as M}from"./FormControl-9Ne_wXge.js";import{M as p}from"./MenuItem-CFfd6fkg.js";import{D as ge}from"./DialogActions-tu8p45QK.js";import{A as pe}from"./ArrowBack-BADPg0TL.js";import{C as ue}from"./Card-f4gJA82V.js";import{C as he}from"./CardContent-Bdo1cAqR.js";import{c as be}from"./createSvgIcon-BJOZcqxU.js";import"./transition-BoHI2LEi.js";import"./CookieConsent-DEMz9Qt1.js";import"./Slide-BpTZt6Xy.js";import"./getReactElementRef-F5A8c8Er.js";import"./index-CaqUbZRR.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-XbzhRCTS.js";import"./Link-Cm4ksNIx.js";import"./DefaultPropsProvider-Bua-nAaA.js";import"./createTheme-C_kE-Qd2.js";import"./isFocusVisible-B8k4qzLc.js";import"./Close-CE36E4Lb.js";import"./Fade-DhaX7TN9.js";import"./useThemeProps-BWPYVe8w.js";import"./ButtonBase-Cf3WRSsW.js";import"./CircularProgress-RchlJGKc.js";import"./useSlot-CiX-lWvG.js";import"./List-D9XOj4nK.js";import"./index-Cvm9KgRT.js";import"./useSlotProps-5DvMlV7h.js";import"./Grow---KOMtVK.js";import"./Modal-DIrGbC0Y.js";import"./Portal-DfkSyL9i.js";import"./useControlled-LNSG5UB_.js";import"./dividerClasses-C37mlFxW.js";import"./isMuiElement-BEUJm6md.js";import"./listItemTextClasses-DfQra0jB.js";const fe=be(e.jsx("path",{d:"M10 9V5l-7 7 7 7v-4.1c5 0 8.5 1.6 11 5.1-1-5-4-10-11-11"}));function fr({auth:A,project:l,taskData:i,users:q,priorities:V}){const[J,j]=x.useState(!1),[C,U]=x.useState(""),[u,k]=x.useState(null),[E,R]=x.useState(null),[W,v]=x.useState(""),[w,F]=x.useState(!1),[h,P]=x.useState(null),[K,O]=x.useState(!1),[b,Q]=x.useState({src:"",alt:"",title:"",canDelete:!1,deleteHandler:null}),[a,g]=x.useState({title:i.title,description:i.description||"",start_date:i.start_date||"",end_date:i.end_date||"",assignee_id:i.assignee?.id||"",status:i.status,priority:i.priority,milestone:i.milestone}),X=r=>{switch(r){case"urgent":return"#f44336";case"high":return"#ff9800";case"medium":return"#2196f3";case"low":return"#4caf50";default:return"#2196f3"}},H=r=>{switch(r){case"urgent":return"Urgent";case"high":return"High";case"medium":return"Medium";case"low":return"Low";default:return"Medium"}},Z=()=>{m.patch(route("tasks.update",[l.id,i.id]),a,{onSuccess:()=>{j(!1)}})},D=()=>{const r=new FormData;C&&r.append("content",C),u?.id&&r.append("parent_id",u.id),h&&r.append("image",h),m.post(route("comments.store",[l.id,i.id]),r,{forceFormData:!0,onSuccess:()=>{U(""),k(null),P(null)}})},ee=r=>{R(r),v(r.content)},re=()=>{m.patch(route("comments.update",[l.id,i.id,E.id]),{content:W},{onSuccess:()=>{R(null),v("")}})},ie=r=>{confirm("Are you sure you want to delete this comment?")&&m.delete(route("comments.destroy",[l.id,i.id,r.id]))},B=r=>{const s=r.target.files?.[0];if(!s)return;const d=new FormData;d.append("image",s),F(!0),m.post(route("tasks.attachments.store",[l.id,i.id]),d,{forceFormData:!0,onSuccess:()=>{m.reload({only:["taskData"]})},onFinish:()=>F(!1),onError:y=>{console.error("Image upload failed:",y),alert("Image upload failed: "+(y.image?.[0]||"Unknown error"))}})},T=(r,s,d,y=!1,oe=null)=>{Q({src:r,alt:s,title:d,canDelete:y,deleteHandler:oe}),O(!0)},L=(r,s=!1)=>e.jsx(ue,{variant:"outlined",sx:{ml:s?4:0,mb:2,backgroundColor:s?"rgba(25, 118, 210, 0.03)":"background.paper",borderRadius:2,border:s?"1px solid rgba(25, 118, 210, 0.2)":"1px solid rgba(0,0,0,0.12)",boxShadow:s?"0 2px 8px rgba(25, 118, 210, 0.1)":"0 2px 8px rgba(0,0,0,0.1)",transition:"all 0.2s ease-in-out","&:hover":{boxShadow:s?"0 4px 16px rgba(25, 118, 210, 0.15)":"0 4px 16px rgba(0,0,0,0.15)",transform:"translateY(-1px)"}},children:e.jsxs(he,{sx:{py:2,px:3},children:[e.jsxs(n,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",sx:{mb:1.5},children:[e.jsxs(n,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(t,{sx:{width:32,height:32,borderRadius:"50%",backgroundColor:"primary.main",display:"flex",alignItems:"center",justifyContent:"center",color:"white",fontWeight:"bold",fontSize:"0.875rem"},children:r.user.name.charAt(0).toUpperCase()}),e.jsxs(t,{children:[e.jsx(o,{variant:"subtitle2",fontWeight:"bold",sx:{color:"text.primary"},children:r.user.name}),e.jsx(o,{variant:"caption",color:"text.secondary",children:new Date(r.created_at).toLocaleString()})]})]}),r.user.id===A.user.id&&e.jsxs(n,{direction:"row",spacing:.5,children:[e.jsx(S,{size:"small",onClick:()=>ee(r),sx:{backgroundColor:"rgba(25, 118, 210, 0.1)","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.2)"}},children:e.jsx(N,{fontSize:"small",sx:{color:"primary.main"}})}),e.jsx(S,{size:"small",onClick:()=>ie(r),sx:{backgroundColor:"rgba(244, 67, 54, 0.1)","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.2)"}},children:e.jsx(G,{fontSize:"small",sx:{color:"error.main"}})})]})]}),E?.id===r.id?e.jsxs(n,{spacing:2,children:[e.jsx(f,{multiline:!0,rows:3,value:W,onChange:d=>v(d.target.value),variant:"outlined",size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(0,0,0,0.02)"}}}),e.jsxs(n,{direction:"row",spacing:1,children:[e.jsx(c,{size:"small",variant:"contained",onClick:re,disabled:!W.trim(),sx:{borderRadius:2,px:2,background:"linear-gradient(45deg, #4caf50, #66bb6a)","&:hover":{background:"linear-gradient(45deg, #388e3c, #4caf50)"}},children:"Update"}),e.jsx(c,{size:"small",variant:"outlined",onClick:()=>{R(null),v("")},sx:{borderRadius:2,px:2},children:"Cancel"})]})]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{variant:"body2",sx:{mb:2,whiteSpace:"pre-wrap",lineHeight:1.6,backgroundColor:"rgba(0,0,0,0.02)",p:2,borderRadius:2,border:"1px solid rgba(0,0,0,0.08)"},children:r.content}),r.attachments&&r.attachments.length>0&&e.jsx(t,{sx:{display:"grid",gap:1,gridTemplateColumns:"repeat(auto-fill,minmax(120px,1fr))",mb:2},children:r.attachments.map(d=>e.jsx(t,{sx:{position:"relative",borderRadius:1,overflow:"hidden",border:"1px solid",borderColor:"divider",aspectRatio:"4/3",cursor:"pointer","&:hover":{"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.1)"}}},onClick:()=>T(d.url,d.original_name,`Comment by ${r.user.name}: ${d.original_name}`,!1),children:e.jsx("img",{src:d.url,alt:d.original_name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},loading:"lazy"})},d.id))}),!s&&e.jsx(c,{size:"small",startIcon:e.jsx(fe,{}),onClick:()=>k(r),sx:{textTransform:"none",borderRadius:2,px:2,backgroundColor:"rgba(25, 118, 210, 0.08)",color:"primary.main","&:hover":{backgroundColor:"rgba(25, 118, 210, 0.15)"}},children:"Reply"})]})]})},r.id);return e.jsxs(ne,{user:A.user,header:e.jsxs(t,{sx:{width:"100%",overflow:"hidden"},children:[e.jsxs(n,{direction:"row",alignItems:"center",spacing:2,sx:{mb:1},children:[e.jsx(c,{variant:"outlined",startIcon:e.jsx(pe,{}),onClick:()=>m.visit(route("tasks.index",l.id)),sx:{flexShrink:0,minWidth:"auto",px:2,py:1,borderRadius:2,whiteSpace:"nowrap","&:hover":{backgroundColor:"primary.light",color:"white",borderColor:"primary.main"}},children:"Back to Board"}),e.jsx(o,{variant:"h4",component:"h2",sx:{flexGrow:1,fontWeight:"bold",background:"linear-gradient(45deg, #1976d2, #42a5f5)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",minWidth:0},children:i.title})]}),e.jsx(o,{variant:"subtitle1",color:"text.secondary",sx:{ml:.5,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:l.name})]}),children:[e.jsx(te,{title:`${i.title} - ${l.name}`}),e.jsxs(de,{maxWidth:"lg",sx:{mt:4,mb:4},children:[e.jsxs(Y,{elevation:3,sx:{p:3,mb:3,borderRadius:3,background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",border:"1px solid rgba(0,0,0,0.1)",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e.jsxs(t,{sx:{mb:3},children:[e.jsxs(n,{direction:"row",alignItems:"center",spacing:2,sx:{mb:1},children:[e.jsx(o,{variant:"h6",sx:{flex:1},children:"Task Images"}),e.jsxs(c,{variant:"outlined",component:"label",size:"small",disabled:w,children:[w?"Uploading...":"Add Image",e.jsx("input",{hidden:!0,type:"file",accept:"image/*",onChange:B})]})]}),i.attachments&&i.attachments.length>0?e.jsx(t,{sx:{display:"grid",gap:2,gridTemplateColumns:"repeat(auto-fill,minmax(160px,1fr))"},children:i.attachments.map(r=>e.jsxs(t,{sx:{position:"relative",borderRadius:1,overflow:"hidden",border:"1px solid",borderColor:"divider",aspectRatio:"16/10",cursor:"pointer","&:hover":{"&::after":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.1)"}}},onClick:()=>T(r.url,r.original_name,`Task #${i.id}: ${r.original_name}`,!0,()=>m.delete(route("tasks.attachments.destroy",[l.id,i.id,r.id]))),children:[e.jsx("img",{src:r.url,alt:r.original_name,style:{width:"100%",height:"100%",objectFit:"cover",display:"block"},loading:"lazy"}),e.jsx(S,{size:"small",sx:{position:"absolute",top:4,right:4,backgroundColor:"rgba(244, 67, 54, 0.8)",color:"white","&:hover":{backgroundColor:"rgba(244, 67, 54, 0.9)"}},onClick:s=>{s.stopPropagation(),confirm("Delete this image?")&&m.delete(route("tasks.attachments.destroy",[l.id,i.id,r.id]))},children:e.jsx(G,{fontSize:"small"})})]},r.id))}):e.jsx(o,{variant:"body2",color:"text.secondary",children:"No images yet."})]}),e.jsxs(n,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",sx:{mb:3},children:[e.jsxs(t,{sx:{flexGrow:1,mr:2,minWidth:0},children:[e.jsx(o,{variant:"h4",component:"h1",sx:{fontWeight:"bold",mb:1,color:"text.primary",lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i.title}),e.jsxs(o,{variant:"body2",color:"text.secondary",children:["Created by ",i.creator?.name," on"," ",new Date(i.created_at).toLocaleDateString()]})]}),e.jsx(c,{variant:"contained",startIcon:e.jsx(N,{}),onClick:()=>j(!0),sx:{flexShrink:0,borderRadius:2,px:3,py:1.5,minWidth:"auto",whiteSpace:"nowrap",background:"linear-gradient(45deg, #1976d2, #42a5f5)",boxShadow:"0 3px 10px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(45deg, #1565c0, #1976d2)",boxShadow:"0 4px 15px rgba(25, 118, 210, 0.4)"}},children:"Edit Task"})]}),e.jsxs(n,{direction:"row",spacing:2,sx:{mb:3,flexWrap:"wrap",gap:1},children:[e.jsx(I,{label:H(i.priority),icon:i.priority==="urgent"?e.jsx(ae,{}):void 0,sx:{backgroundColor:X(i.priority),color:"white",fontWeight:"bold",fontSize:"0.875rem",height:32,"& .MuiChip-icon":{color:"white"},boxShadow:"0 2px 8px rgba(0,0,0,0.15)"}}),e.jsx(I,{label:i.status.charAt(0).toUpperCase()+i.status.slice(1),variant:"outlined",sx:{borderColor:"primary.main",color:"primary.main",fontWeight:"medium",fontSize:"0.875rem",height:32,backgroundColor:"rgba(25, 118, 210, 0.05)"}}),i.milestone&&e.jsx(I,{label:"Milestone",color:"warning",variant:"outlined",sx:{fontWeight:"medium",fontSize:"0.875rem",height:32,backgroundColor:"rgba(237, 108, 2, 0.05)"}})]}),i.description&&e.jsx(t,{sx:{mb:3,p:2,backgroundColor:"rgba(0,0,0,0.02)",borderRadius:2,border:"1px solid rgba(0,0,0,0.08)"},children:e.jsx(o,{variant:"body1",sx:{whiteSpace:"pre-wrap",lineHeight:1.6},children:i.description})}),e.jsxs(t,{sx:{p:2,backgroundColor:"rgba(25, 118, 210, 0.03)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.1)"},children:[e.jsx(o,{variant:"subtitle2",sx:{mb:1.5,fontWeight:"bold",color:"primary.main"},children:"Task Details"}),e.jsxs(n,{spacing:1,children:[i.start_date&&e.jsxs(n,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(o,{variant:"body2",sx:{fontWeight:"medium",minWidth:100},children:"Start Date:"}),e.jsx(o,{variant:"body2",children:new Date(i.start_date).toLocaleDateString()})]}),i.end_date&&e.jsxs(n,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(o,{variant:"body2",sx:{fontWeight:"medium",minWidth:100},children:"End Date:"}),e.jsx(o,{variant:"body2",children:new Date(i.end_date).toLocaleDateString()})]}),i.assignee&&e.jsxs(n,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(o,{variant:"body2",sx:{fontWeight:"medium",minWidth:100},children:"Assigned to:"}),e.jsx(I,{label:i.assignee.name,size:"small",variant:"outlined",sx:{backgroundColor:"rgba(76, 175, 80, 0.1)",borderColor:"success.main",color:"success.main"}})]})]})]})]}),e.jsxs(Y,{elevation:3,sx:{p:3,borderRadius:3,background:"linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%)",border:"1px solid rgba(0,0,0,0.1)",boxShadow:"0 4px 20px rgba(0,0,0,0.1)"},children:[e.jsxs(n,{direction:"row",alignItems:"center",spacing:1,sx:{mb:3},children:[e.jsx(t,{sx:{p:1,borderRadius:2,backgroundColor:"primary.light",display:"flex",alignItems:"center"},children:e.jsx($,{sx:{color:"white"}})}),e.jsxs(o,{variant:"h5",sx:{fontWeight:"bold"},children:["Comments (",i.comments.length,")"]})]}),e.jsxs(t,{sx:{mb:4},children:[u&&e.jsx(t,{sx:{mb:2,p:2,backgroundColor:"rgba(25, 118, 210, 0.08)",borderRadius:2,border:"1px solid rgba(25, 118, 210, 0.2)"},children:e.jsxs(n,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[e.jsxs(o,{variant:"body2",color:"primary.main",sx:{fontWeight:"medium"},children:["Replying to ",u.user.name]}),e.jsx(S,{size:"small",onClick:()=>k(null),sx:{backgroundColor:"rgba(0,0,0,0.1)","&:hover":{backgroundColor:"rgba(0,0,0,0.2)"}},children:"âœ•"})]})}),e.jsx(f,{multiline:!0,rows:3,placeholder:u?"Write a reply...":"Add a comment...",value:C,onChange:r=>U(r.target.value),variant:"outlined",fullWidth:!0,sx:{mb:2,"& .MuiOutlinedInput-root":{borderRadius:2,backgroundColor:"rgba(0,0,0,0.02)","&:hover fieldset":{borderColor:"primary.main"},"&.Mui-focused fieldset":{borderColor:"primary.main",borderWidth:2}}}}),e.jsxs(t,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[e.jsxs(c,{variant:"outlined",component:"label",size:"small",children:[h?"Change Image":"Attach Image",e.jsx("input",{hidden:!0,type:"file",accept:"image/*",onChange:r=>P(r.target.files?.[0]||null)})]}),h&&e.jsx(o,{variant:"caption",color:"text.secondary",children:h.name})]}),e.jsx(c,{variant:"contained",onClick:D,disabled:!C.trim()&&!h,sx:{borderRadius:2,px:3,py:1,background:"linear-gradient(45deg, #1976d2, #42a5f5)",boxShadow:"0 3px 10px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(45deg, #1565c0, #1976d2)",boxShadow:"0 4px 15px rgba(25, 118, 210, 0.4)"},"&:disabled":{background:"rgba(0,0,0,0.12)",boxShadow:"none"}},children:u?"Reply":"Comment"})]}),e.jsx(le,{sx:{mb:3,opacity:.6}}),i.comments.length===0?e.jsxs(t,{sx:{textAlign:"center",py:6,backgroundColor:"rgba(0,0,0,0.02)",borderRadius:2,border:"1px dashed rgba(0,0,0,0.2)"},children:[e.jsx($,{sx:{fontSize:48,color:"text.disabled",mb:2}}),e.jsx(o,{color:"text.secondary",variant:"h6",sx:{mb:1},children:"No comments yet"}),e.jsx(o,{color:"text.secondary",variant:"body2",children:"Be the first to comment on this task!"})]}):e.jsx(n,{spacing:2,children:i.comments.map(r=>e.jsxs(t,{children:[L(r),r.replies.length>0&&e.jsx(n,{spacing:1,sx:{ml:2},children:r.replies.map(s=>L(s,!0))})]},r.id))})]})]}),e.jsxs(ce,{open:J,onClose:()=>j(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,boxShadow:"0 10px 40px rgba(0,0,0,0.2)"}},children:[e.jsx(me,{sx:{background:"linear-gradient(45deg, #1976d2, #42a5f5)",color:"white",fontWeight:"bold",fontSize:"1.25rem"},children:"Edit Task"}),e.jsx(xe,{sx:{maxHeight:"60vh",overflowY:"auto",backgroundColor:"rgba(0,0,0,0.01)","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.05)",borderRadius:"4px"},"&::-webkit-scrollbar-thumb":{background:"rgba(25, 118, 210, 0.3)",borderRadius:"4px","&:hover":{background:"rgba(25, 118, 210, 0.5)"}}},children:e.jsxs(n,{spacing:3,sx:{mt:2},children:[e.jsx(f,{label:"Title",value:a.title,onChange:r=>g({...a,title:r.target.value}),fullWidth:!0,required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(f,{label:"Description",value:a.description,onChange:r=>g({...a,description:r.target.value}),multiline:!0,rows:4,fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsxs(n,{direction:"row",spacing:2,children:[e.jsx(f,{label:"Start Date",type:"date",value:a.start_date,onChange:r=>g({...a,start_date:r.target.value}),InputLabelProps:{shrink:!0},fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(f,{label:"End Date",type:"date",value:a.end_date,onChange:r=>g({...a,end_date:r.target.value}),InputLabelProps:{shrink:!0},fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})]}),e.jsxs(n,{direction:"row",spacing:2,children:[e.jsxs(M,{fullWidth:!0,children:[e.jsx(_,{children:"Assignee"}),e.jsxs(z,{value:a.assignee_id,onChange:r=>g({...a,assignee_id:r.target.value}),label:"Assignee",sx:{borderRadius:2},children:[e.jsx(p,{value:"",children:"Unassigned"}),q.map(r=>e.jsx(p,{value:r.id,children:r.name},r.id))]})]}),e.jsxs(M,{fullWidth:!0,children:[e.jsx(_,{children:"Status"}),e.jsxs(z,{value:a.status,onChange:r=>g({...a,status:r.target.value}),label:"Status",sx:{borderRadius:2},children:[e.jsx(p,{value:"todo",children:"To Do"}),e.jsx(p,{value:"inprogress",children:"In Progress"}),e.jsx(p,{value:"review",children:"Review"}),e.jsx(p,{value:"done",children:"Done"})]})]})]}),e.jsxs(M,{fullWidth:!0,children:[e.jsx(_,{children:"Priority"}),e.jsx(z,{value:a.priority,onChange:r=>g({...a,priority:r.target.value}),label:"Priority",sx:{borderRadius:2},children:V.map(r=>e.jsx(p,{value:r,children:H(r)},r))})]}),e.jsxs(t,{sx:{p:2,border:"1px dashed",borderColor:"divider",borderRadius:2,backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx(o,{variant:"subtitle2",sx:{mb:1,fontWeight:600},children:"Task Images"}),e.jsxs(c,{variant:"outlined",component:"label",size:"small",disabled:w,sx:{mb:2},children:[w?"Uploading...":"Add Image",e.jsx("input",{hidden:!0,type:"file",accept:"image/*",onChange:B})]}),i.attachments&&i.attachments.length>0&&e.jsxs(t,{sx:{display:"grid",gap:1,gridTemplateColumns:"repeat(auto-fill,minmax(80px,1fr))",maxHeight:120,overflowY:"auto"},children:[i.attachments.slice(0,4).map(r=>e.jsx(t,{sx:{position:"relative",borderRadius:1,overflow:"hidden",border:"1px solid",borderColor:"divider",aspectRatio:"1",cursor:"pointer"},onClick:()=>T(r.url,r.original_name,`Task #${i.id}: ${r.original_name}`,!0,()=>m.delete(route("tasks.attachments.destroy",[l.id,i.id,r.id]))),children:e.jsx("img",{src:r.url,alt:r.original_name,style:{width:"100%",height:"100%",objectFit:"cover"}})},r.id)),i.attachments.length>4&&e.jsx(t,{sx:{display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0.1)",borderRadius:1,aspectRatio:"1"},children:e.jsxs(o,{variant:"caption",children:["+",i.attachments.length-4]})})]})]})]})}),e.jsxs(ge,{sx:{p:3,backgroundColor:"rgba(0,0,0,0.02)"},children:[e.jsx(c,{onClick:()=>j(!1),sx:{borderRadius:2,px:3},children:"Cancel"}),e.jsx(c,{onClick:Z,variant:"contained",sx:{borderRadius:2,px:3,background:"linear-gradient(45deg, #1976d2, #42a5f5)",boxShadow:"0 3px 10px rgba(25, 118, 210, 0.3)","&:hover":{background:"linear-gradient(45deg, #1565c0, #1976d2)",boxShadow:"0 4px 15px rgba(25, 118, 210, 0.4)"}},children:"Update Task"})]})]}),e.jsx(se,{open:K,onClose:()=>O(!1),src:b.src,alt:b.alt,title:b.title,canDelete:b.canDelete,onDelete:b.deleteHandler,downloadUrl:b.src})]})}export{fr as default};
