import{j as e}from"./index-BgEJ3fxA.js";import{r as v}from"./ProjectReportDialog-DJSS4N_t.js";import{a as H,H as M,r as k}from"./app-K9NsoLMf.js";import{A as U}from"./AuthenticatedLayout-BoAa4njZ.js";import{C as w}from"./CheckCircleRounded-CybLc3-8.js";import{c as B}from"./createSvgIcon-BJOZcqxU.js";import{A as G}from"./AutoAwesome-C8YBcAsX.js";import{C as R}from"./WorkspacePremiumRounded-BEMuXXNC.js";import{C as Y}from"./Close-CE36E4Lb.js";import{W as K}from"./WarningAmber-CV96wkjt.js";import{u as S,T as o}from"./Typography-D7k_4FBJ.js";import{B as C}from"./Box-DwDErR6p.js";import{P as E}from"./Paper-PFfIOqkm.js";import{S as a}from"./Stack-8UQV77y9.js";import{C as f}from"./Chip-21CA6oxg.js";import{D as A}from"./Divider-Mh942rqT.js";import{G as F}from"./Grid-DNDvuRa5.js";import{B as g}from"./Button-awGqnw0r.js";import{D as V,a as q}from"./DialogContent-DSMMXfBC.js";import{D as J}from"./DialogTitle-CslrqFxR.js";import{I as Q}from"./IconButton-MFFsjt5V.js";import{a as X}from"./FormControl-9Ne_wXge.js";import{R as Z,a as ee}from"./RadioGroup-Blb6j3N8.js";import{F as te}from"./FormControlLabel-DPXQwZ6c.js";import{a as n}from"./createTheme-C_kE-Qd2.js";import"./transition-BoHI2LEi.js";import"./CookieConsent-DEMz9Qt1.js";import"./Slide-BpTZt6Xy.js";import"./getReactElementRef-F5A8c8Er.js";import"./index-CaqUbZRR.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-XbzhRCTS.js";import"./Card-f4gJA82V.js";import"./DefaultPropsProvider-Bua-nAaA.js";import"./Link-Cm4ksNIx.js";import"./isFocusVisible-B8k4qzLc.js";import"./useThemeProps-BWPYVe8w.js";import"./useSlot-CiX-lWvG.js";import"./ButtonBase-Cf3WRSsW.js";import"./dividerClasses-C37mlFxW.js";import"./isMuiElement-BEUJm6md.js";import"./CircularProgress-RchlJGKc.js";import"./Fade-DhaX7TN9.js";import"./Modal-DIrGbC0Y.js";import"./Portal-DfkSyL9i.js";import"./useControlled-LNSG5UB_.js";const T=B([e.jsx("path",{d:"M16.5 9c-.42 0-.83.04-1.24.11L2.4 3.6c-.66-.29-1.39.2-1.39.91L1 9.2c0 .47.33.88.78.98L10 12l-8.22 1.83c-.45.1-.78.5-.78.97l.01 4.68c0 .72.73 1.2 1.39.92l6.68-2.86C9.59 21.19 12.71 24 16.5 24c4.14 0 7.5-3.36 7.5-7.5S20.64 9 16.5 9m0 13c-3.03 0-5.5-2.47-5.5-5.5s2.47-5.5 5.5-5.5 5.5 2.47 5.5 5.5-2.47 5.5-5.5 5.5"},"0"),e.jsx("path",{d:"M18.62 14.38c-.2-.2-.51-.2-.71 0l-1.41 1.41-1.41-1.41c-.2-.2-.51-.2-.71 0s-.2.51 0 .71l1.41 1.41-1.41 1.41c-.2.2-.2.51 0 .71s.51.2.71 0l1.41-1.41 1.41 1.41c.2.2.51.2.71 0s.2-.51 0-.71l-1.41-1.41 1.41-1.41c.2-.2.2-.52 0-.71"},"1")]),D=B(e.jsx("path",{d:"m16.85 6.85 1.44 1.44-4.88 4.88-3.29-3.29a.996.996 0 0 0-1.41 0l-6 6.01c-.39.39-.39 1.02 0 1.41s1.02.39 1.41 0L9.41 12l3.29 3.29c.39.39 1.02.39 1.41 0l5.59-5.58 1.44 1.44c.31.31.85.09.85-.35V6.5c.01-.28-.21-.5-.49-.5h-4.29c-.45 0-.67.54-.36.85"})),re=[{value:"too_expensive",label:"Too expensive"},{value:"not_using_enough",label:"Not using it enough"},{value:"missing_features",label:"Missing features I need"},{value:"technical_issues",label:"Technical issues"},{value:"switching_service",label:"Switching to another service"},{value:"temporary_pause",label:"Taking a temporary break"},{value:"other",label:"Other reason"}];function ie({open:r,onClose:x,onConfirm:l,planName:i}){const[m,u]=v.useState(1),[c,d]=v.useState(""),b=S(),t=()=>{u(1),d(""),x()},y=()=>{u(2)},j=()=>{l(c),t()};return e.jsxs(V,{open:r,onClose:t,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(145deg, rgba(255,255,255,0.95), rgba(255,255,255,0.85))",backdropFilter:"blur(10px)"}},children:[e.jsxs(J,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",pb:1},children:[e.jsxs(a,{direction:"row",alignItems:"center",spacing:1,children:[e.jsx(K,{color:"warning"}),e.jsx(o,{variant:"h6",fontWeight:700,children:m===1?"Cancel Subscription?":"Why are you canceling?"})]}),e.jsx(Q,{onClick:t,size:"small",children:e.jsx(Y,{})})]}),e.jsxs(q,{sx:{pb:3},children:[m===1&&e.jsxs(a,{spacing:3,children:[e.jsxs(o,{variant:"body1",sx:{color:n(b.palette.text.primary,.8)},children:["Are you sure you want to cancel your ",e.jsx("strong",{children:i})," ","subscription? You'll lose access to premium features at the end of your current billing period."]}),e.jsxs(a,{direction:"row",spacing:2,justifyContent:"flex-end",children:[e.jsx(g,{variant:"outlined",onClick:t,sx:{textTransform:"none",fontWeight:600},children:"Keep Subscription"}),e.jsx(g,{variant:"contained",color:"warning",onClick:y,sx:{textTransform:"none",fontWeight:600},children:"Yes, Continue"})]})]}),m===2&&e.jsxs(a,{spacing:3,children:[e.jsx(o,{variant:"body1",sx:{color:n(b.palette.text.primary,.8)},children:"Help us improve by letting us know why you're canceling:"}),e.jsx(X,{component:"fieldset",children:e.jsx(Z,{value:c,onChange:s=>d(s.target.value),children:re.map(s=>e.jsx(te,{value:s.value,control:e.jsx(ee,{}),label:s.label,sx:{mb:.5}},s.value))})}),e.jsxs(a,{direction:"row",spacing:2,justifyContent:"flex-end",children:[e.jsx(g,{variant:"outlined",onClick:()=>u(1),sx:{textTransform:"none",fontWeight:600},children:"Back"}),e.jsx(g,{variant:"contained",color:"error",onClick:j,disabled:!c,sx:{textTransform:"none",fontWeight:600},children:"Cancel Subscription"})]})]})]})]})}function ne({plan:r,isCurrent:x,subscribed:l,onTrial:i,onGrace:m,onSubscribe:u,onCancel:c,onResume:d,hasUsedTrial:b}){const t=S(),y=/business/i.test(r.name),j=r.trial_days>0&&!b;return e.jsxs(E,{elevation:0,sx:{p:3,height:"100%",borderRadius:3,border:`1px solid ${n(t.palette.primary.main,.25)}`,background:"linear-gradient(135deg,rgba(255,255,255,0.92),rgba(255,255,255,0.6))",backdropFilter:"blur(10px)",display:"flex",flexDirection:"column",gap:2,position:"relative",overflow:"hidden",boxShadow:"0 12px 30px -18px rgba(30,50,90,.35), 0 2px 6px rgba(0,0,0,.08)"},children:[e.jsx(C,{"aria-hidden":!0,sx:{position:"absolute",top:-120,right:-120,width:260,height:260,background:"radial-gradient(circle at 60% 40%, rgba(255,255,255,0.7), transparent 65%)",pointerEvents:"none"}}),e.jsxs(a,{direction:"row",alignItems:"flex-start",justifyContent:"space-between",spacing:2,children:[e.jsxs(a,{direction:"column",spacing:0,sx:{flex:1},children:[e.jsx(o,{variant:"h6",fontWeight:800,children:r.name}),r.price!==void 0&&r.price>0?e.jsxs(o,{variant:"h5",fontWeight:700,sx:{color:t.palette.primary.main,lineHeight:1.2},children:["$",r.price,e.jsxs(o,{component:"span",variant:"body2",sx:{color:n(t.palette.text.primary,.6),ml:.5,fontWeight:500},children:["/",r.interval]})]}):e.jsx(o,{variant:"body2",sx:{color:n(t.palette.text.primary,.6),fontStyle:"italic"},children:"Price loading..."})]}),e.jsxs(a,{direction:"column",spacing:1,alignItems:"flex-end",children:[y&&e.jsx(f,{size:"small",icon:e.jsx(D,{}),label:"Most Popular",sx:{height:22,fontWeight:700,background:n(t.palette.warning.main,.12),border:`1px solid ${n(t.palette.warning.main,.35)}`}}),j&&!l&&!i&&e.jsx(f,{size:"small",label:`${r.trial_days} day trial`,sx:{height:22,fontWeight:700,background:n(t.palette.success.main,.12),border:`1px solid ${n(t.palette.success.main,.35)}`,color:t.palette.success.main}})]}),e.jsxs(a,{direction:"row",spacing:1,children:[x&&l&&!i&&e.jsx(f,{size:"small",color:"success",icon:e.jsx(w,{}),label:"Current Plan",sx:{fontWeight:700,height:24}}),x&&i&&e.jsx(f,{size:"small",color:"success",icon:e.jsx(w,{}),label:"On Trial",sx:{fontWeight:700,height:24}})]})]}),e.jsx(a,{spacing:.85,sx:{mt:.5},children:r.features.map((s,h)=>e.jsxs(a,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(w,{fontSize:"small",sx:{color:t.palette.success.main}}),e.jsx(o,{variant:"body2",sx:{color:n(t.palette.text.primary,.85)},children:s})]},h))}),e.jsxs(C,{sx:{mt:"auto"},children:[!l&&!i&&e.jsxs(g,{fullWidth:!0,variant:"contained",onClick:()=>u(r.price_id),startIcon:e.jsx(R,{}),sx:{textTransform:"none",fontWeight:800,background:"linear-gradient(135deg,#6366F1,#4F46E5 55%,#4338CA)",boxShadow:"0 8px 20px -8px rgba(79,70,229,.55), 0 2px 6px rgba(0,0,0,.25)","&:hover":{background:"linear-gradient(135deg,#595CEB,#4841D6 55%,#3B32B8)"}},children:["Start ",j?`${r.trial_days}-Day Trial`:r.name]}),(l||i)&&x&&!m&&e.jsx(g,{fullWidth:!0,variant:"text",color:"error",onClick:()=>c(r.name),sx:{textTransform:"none",fontWeight:700},children:"Cancel Subscription"}),(l||i)&&x&&m&&e.jsx(g,{fullWidth:!0,variant:"contained",color:"success",onClick:d,sx:{textTransform:"none",fontWeight:800},children:"Resume Subscription"}),(l||i)&&!x&&e.jsxs(g,{fullWidth:!0,variant:"outlined",onClick:()=>u(r.price_id),startIcon:e.jsx(D,{}),sx:{textTransform:"none",fontWeight:700,borderColor:t.palette.primary.main,color:t.palette.primary.main,"&:hover":{borderColor:t.palette.primary.dark,backgroundColor:n(t.palette.primary.main,.04)}},children:["Upgrade to ",r.name]})]})]})}function Qe({auth:r,user:x,plans:l,current:i,trial_eligibility:m,stripe_key:u}){const c=S(),{flash:d}=H().props,[b,t]=v.useState(!1),[y,j]=v.useState(""),s=!!i?.subscribed,h=!!i?.on_trial,W=!!i?.on_grace,_=i?.ends_at?new Date(i.ends_at):null,I=i?.trial_ends_at?new Date(i.trial_ends_at):null,P=!!m?.has_used_trial,L=p=>{k.post(route("billing.checkout"),{price_id:p})},$=p=>{j(p),t(!0)},z=p=>{k.post(route("billing.cancel"),{cancellation_reason:p})},O=()=>{k.post(route("billing.resume"))};return e.jsxs(e.Fragment,{children:[e.jsx(M,{title:"Billing"}),e.jsxs(U,{user:r?.user,children:[e.jsx(C,{sx:{minHeight:"100vh",p:{xs:2,md:4},background:c.palette.mode==="light"?"linear-gradient(140deg,#F6F9FC 0%,#EEF3F9 55%,#E5ECF5 100%)":"linear-gradient(140deg,#0F1823,#101B27)"},children:e.jsxs(E,{elevation:0,sx:{maxWidth:1100,mx:"auto",p:{xs:3,md:4},borderRadius:4,background:"linear-gradient(145deg,rgba(255,255,255,0.92),rgba(255,255,255,0.62))",backdropFilter:"blur(16px)",border:`1px solid ${n(c.palette.primary.main,.18)}`,boxShadow:"0 10px 34px -12px rgba(30,50,90,.25), 0 2px 4px rgba(0,0,0,.05)",position:"relative",overflow:"hidden"},children:[e.jsx(C,{"aria-hidden":!0,sx:{position:"absolute",width:320,height:320,top:-130,right:-110,background:"radial-gradient(circle at 60% 40%, rgba(255,255,255,0.7), transparent 70%)",pointerEvents:"none"}}),e.jsxs(a,{spacing:1.25,mb:2.5,children:[e.jsx(o,{variant:"h5",fontWeight:900,sx:{letterSpacing:"-0.5px",background:"linear-gradient(90deg,#101E40,#2F4370 55%,#456092 90%)",WebkitBackgroundClip:"text",color:"transparent"},children:"Billing & Subscription"}),e.jsx(o,{variant:"body2",sx:{color:n(c.palette.text.primary,.78),maxWidth:720},children:"Choose your plan and start with a free trial. Access premium features like AI task generation, team collaboration, and advanced reporting."}),e.jsxs(a,{direction:"row",spacing:1,flexWrap:"wrap",alignItems:"center",children:[e.jsx(f,{icon:e.jsx(G,{}),label:h?"On Trial":s?"Active Subscriber":"Free Tier",color:h||s?"success":"default",variant:s||h?"filled":"outlined",sx:{fontWeight:700,height:32}}),h&&I&&e.jsx(f,{icon:e.jsx(T,{}),color:"success",label:`Trial ends ${I.toLocaleDateString()}`,sx:{fontWeight:700,height:32}}),W&&_&&e.jsx(f,{icon:e.jsx(T,{}),color:"warning",label:`Cancels on ${_.toLocaleDateString()}`,size:"small",sx:{fontWeight:700}})]}),d?.error&&e.jsx(o,{color:"error",variant:"body2",children:d.error}),d?.success&&e.jsx(o,{color:"success.main",variant:"body2",children:d.success}),d?.info&&e.jsx(o,{color:"info.main",variant:"body2",children:d.info})]}),e.jsx(A,{sx:{mb:3}}),e.jsx(F,{container:!0,spacing:2.5,children:Array.isArray(l)&&l.map(p=>{const N=(s||h)&&p.key===i?.plan_name;return e.jsx(F,{item:!0,xs:12,md:4,children:e.jsx(ne,{plan:p,isCurrent:N,subscribed:s,onTrial:h,onGrace:W,onSubscribe:L,onCancel:$,onResume:O,hasUsedTrial:P})},p.price_id)})}),e.jsx(A,{sx:{my:4}}),e.jsxs(a,{direction:"row",spacing:1,alignItems:"center",children:[e.jsx(R,{fontSize:"small",sx:{color:n(c.palette.text.primary,.65)}}),e.jsx(o,{variant:"caption",sx:{color:n(c.palette.text.primary,.65)},children:"All payments securely processed by Stripe. Start your free trial with any valid credit card."})]})]})}),e.jsx(ie,{open:b,onClose:()=>t(!1),onConfirm:z,planName:y})]})]})}export{Qe as default};
