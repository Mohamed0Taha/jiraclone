import{j as e}from"./index-BgEJ3fxA.js";import{r}from"./ProjectReportDialog-DJSS4N_t.js";import{r as E,H as V}from"./app-K9NsoLMf.js";import{A as Z}from"./AuthenticatedLayout-BoAa4njZ.js";import{A as C}from"./Add-BSB6z5ab.js";import{S as G}from"./Search-1b5ORwE8.js";import{c as J}from"./createSvgIcon-BJOZcqxU.js";import{A as K}from"./AutoAwesome-C8YBcAsX.js";import{D as U}from"./DeleteForever-Cy1pR0d7.js";import{P as X,E as ee}from"./ProjectAccordion-C8Eo1dqj.js";import{u as M,T as x}from"./Typography-D7k_4FBJ.js";import{B as n}from"./Box-DwDErR6p.js";import{C as W}from"./Container-CINNDH99.js";import{S as p}from"./Stack-8UQV77y9.js";import{C as P}from"./Chip-21CA6oxg.js";import{B as h}from"./Button-awGqnw0r.js";import{P as $}from"./Paper-PFfIOqkm.js";import{T as te,S as re}from"./TextField-BZLKsJ9m.js";import{I as oe}from"./InputAdornment-BMgQdgnP.js";import{M as v}from"./MenuItem-CFfd6fkg.js";import{D as ae}from"./Divider-Mh942rqT.js";import{T as w}from"./Tooltip-B2fzUN7_.js";import{D as se,a as ie}from"./DialogContent-DSMMXfBC.js";import{D as ne}from"./DialogTitle-CslrqFxR.js";import{D as le}from"./DialogContentText-CicDk0in.js";import{D as ce}from"./DialogActions-tu8p45QK.js";import{I as z}from"./IconButton-MFFsjt5V.js";import{a as i}from"./createTheme-C_kE-Qd2.js";import"./transition-BoHI2LEi.js";import"./CookieConsent-DEMz9Qt1.js";import"./Slide-BpTZt6Xy.js";import"./getReactElementRef-F5A8c8Er.js";import"./index-CaqUbZRR.js";import"./debounce-Be36O1Ab.js";import"./ownerWindow-XbzhRCTS.js";import"./Card-f4gJA82V.js";import"./DefaultPropsProvider-Bua-nAaA.js";import"./Link-Cm4ksNIx.js";import"./isFocusVisible-B8k4qzLc.js";import"./Close-CE36E4Lb.js";import"./RateReviewRounded-_pe94eyW.js";import"./RocketLaunchRounded-BHoF4EK3.js";import"./CheckCircleRounded-CybLc3-8.js";import"./AccordionSummary-BfCCgskS.js";import"./useSlot-CiX-lWvG.js";import"./useControlled-LNSG5UB_.js";import"./ButtonBase-Cf3WRSsW.js";import"./LinearProgress-DS1Mq4qD.js";import"./index-Cvm9KgRT.js";import"./useThemeProps-BWPYVe8w.js";import"./CircularProgress-RchlJGKc.js";import"./FormControl-9Ne_wXge.js";import"./isMuiElement-BEUJm6md.js";import"./List-D9XOj4nK.js";import"./useSlotProps-5DvMlV7h.js";import"./Grow---KOMtVK.js";import"./Modal-DIrGbC0Y.js";import"./Portal-DfkSyL9i.js";import"./Fade-DhaX7TN9.js";import"./listItemTextClasses-DfQra0jB.js";import"./dividerClasses-C37mlFxW.js";const de=J(e.jsx("path",{d:"M3 18h6v-2H3zM3 6v2h18V6zm0 7h12v-2H3z"})),me=()=>{const t=M();return r.useMemo(()=>{const a=[t.palette.primary.light,t.palette.secondary.light,t.palette.success.light,t.palette.info.light,t.palette.warning.light,t.palette.error.light].map(c=>({bg:i(c,.16),hover:i(c,.3),focus:i(c,.7)}));return c=>{const d=a[c%a.length];return{bgcolor:d.bg,transition:"background-color .25s, transform .25s","&:hover":{bgcolor:d.hover},"&:focus-within":{outline:`2px solid ${d.focus}`,outlineOffset:2}}}},[t.palette])};function Ct({auth:t,projects:l}){const a=M(),c=me(),[d,b]=r.useState(!1),[u,S]=r.useState(null),[f,k]=r.useState(""),[y,R]=r.useState("recent"),D=r.useCallback((o,s)=>{o?.stopPropagation?.(),o?.preventDefault?.(),S(s),b(!0)},[]),B=r.useCallback(()=>{u&&E.delete(`/projects/${u.id}`,{preserveScroll:!0}),b(!1),S(null)},[u]),A=r.useCallback(()=>k(""),[]),I=r.useCallback(()=>b(!1),[]),_=r.useCallback(o=>k(o.target.value),[]),F=r.useCallback(o=>R(o.target.value),[]),T=r.useMemo(()=>{if(!Array.isArray(l))return[];let o=l;if(f.trim()){const s=f.toLowerCase();o=o.filter(m=>{const{name:Y="",key:q="",description:Q=""}=m;return Y.toLowerCase().includes(s)||q.toLowerCase().includes(s)||Q.toLowerCase().includes(s)})}switch(y){case"name_asc":return[...o].sort((s,m)=>(s.name||"").localeCompare(m.name||""));case"name_desc":return[...o].sort((s,m)=>(m.name||"").localeCompare(s.name||""));case"recent":default:return[...o].sort((s,m)=>s.created_at&&m.created_at?new Date(m.created_at)-new Date(s.created_at):(m.id||0)-(s.id||0))}},[l,f,y]),j=Array.isArray(l)?l.length:0,g=T.length,H=r.useMemo(()=>({background:`linear-gradient(115deg, ${i(a.palette.primary.main,.85)} 0%, ${i(a.palette.secondary.main,.85)} 60%, ${i(a.palette.primary.dark,.9)} 100%)`,color:"#fff",pt:{xs:6,md:8},pb:{xs:6,md:9},position:"relative",overflow:"hidden"}),[a.palette]),L=r.useMemo(()=>({position:"absolute",width:420,height:420,top:-120,right:-80,borderRadius:"50%",filter:"blur(80px)",background:`radial-gradient(circle, ${i("#fff",.15)} 0%, transparent 70%)`}),[]),N=r.useMemo(()=>({p:{xs:2,md:3},border:`1px solid ${i(a.palette.divider,.7)}`,borderRadius:4,backdropFilter:"blur(4px)"}),[a.palette.divider]),O=r.useMemo(()=>({p:{xs:2.5,md:4},border:`1px solid ${i(a.palette.divider,.8)}`,borderRadius:4,background:a.palette.mode==="light"?"linear-gradient(180deg,#ffffff,#f8f9fb)":i(a.palette.background.paper,.75),backdropFilter:"blur(4px)"}),[a.palette]);return e.jsxs(e.Fragment,{children:[e.jsx(V,{title:"Dashboard"}),e.jsxs(Z,{user:t.user,children:[e.jsxs(n,{sx:H,children:[e.jsx(n,{"aria-hidden":!0,sx:L}),e.jsx(n,{"aria-hidden":!0,sx:{position:"absolute",width:300,height:300,bottom:-100,left:-60,borderRadius:"50%",filter:"blur(70px)",background:i("#ffffff",.12)}}),e.jsx(W,{maxWidth:"lg",sx:{position:"relative"},children:e.jsxs(p,{direction:{xs:"column",md:"row"},spacing:4,alignItems:{xs:"flex-start",md:"center"},justifyContent:"space-between",children:[e.jsxs(n,{maxWidth:720,children:[e.jsxs(x,{variant:"h3",component:"h1",fontWeight:700,sx:{letterSpacing:"-0.5px",textShadow:"0 4px 22px rgba(0,0,0,0.25)"},children:["Welcome back, ",t.user?.name||"Explorer","!"]}),e.jsx(x,{variant:"h6",sx:{mt:2,fontWeight:400,color:i("#fff",.92),maxWidth:640},children:"Track, explore and grow your projects. Everything you need is a glance away. Let's build something remarkable today."}),e.jsxs(p,{direction:"row",spacing:1.5,mt:3,flexWrap:"wrap",children:[e.jsx(P,{icon:e.jsx(K,{}),label:`${j} Project${j===1?"":"s"}`,sx:{bgcolor:i("#fff",.15),color:"#fff","& .MuiChip-icon":{color:"#fff"},backdropFilter:"blur(4px)"}}),e.jsx(P,{label:f?`Showing ${g}`:`All ${j}`,sx:{bgcolor:i("#000",.25),color:"#fff",backdropFilter:"blur(4px)"}})]})]}),e.jsx(p,{direction:"row",spacing:2,children:e.jsx(h,{variant:"contained",color:"secondary",startIcon:e.jsx(C,{}),href:"/projects/create",size:"large",sx:{textTransform:"none",fontWeight:600,boxShadow:"0 8px 24px -6px rgba(0,0,0,.35)"},children:"New Project"})})]})})]}),e.jsx(n,{sx:{py:{xs:4,md:6},bgcolor:"background.default",minHeight:"60vh"},children:e.jsx(W,{maxWidth:"lg",children:e.jsxs(p,{spacing:4,children:[e.jsx($,{elevation:0,sx:N,children:e.jsxs(p,{direction:{xs:"column",md:"row"},spacing:2.5,alignItems:{xs:"stretch",md:"center"},justifyContent:"space-between",children:[e.jsx(te,{fullWidth:!0,label:"Search projects",placeholder:"Search by name, key or description...",value:f,onChange:_,InputProps:{startAdornment:e.jsx(oe,{position:"start",children:e.jsx(G,{fontSize:"small"})})},sx:{maxWidth:480}}),e.jsxs(p,{direction:"row",spacing:2,alignItems:"center",justifyContent:{xs:"space-between",md:"flex-end"},children:[e.jsxs(n,{display:"flex",alignItems:"center",gap:1.2,children:[e.jsx(de,{fontSize:"small",color:"action"}),e.jsxs(re,{size:"small",value:y,onChange:F,sx:{minWidth:180},displayEmpty:!0,"aria-label":"Sort projects",children:[e.jsx(v,{value:"recent",children:"Most Recent"}),e.jsx(v,{value:"name_asc",children:"Name (A → Z)"}),e.jsx(v,{value:"name_desc",children:"Name (Z → A)"})]})]}),e.jsx(ae,{flexItem:!0,orientation:"vertical",sx:{display:{xs:"none",md:"block"}}}),e.jsx(w,{title:"Create a new project",children:e.jsx(h,{variant:"outlined",startIcon:e.jsx(C,{}),href:"/projects/create",sx:{textTransform:"none"},children:"Add"})})]})]})}),e.jsxs($,{elevation:0,sx:O,children:[e.jsxs(p,{direction:{xs:"column",sm:"row"},spacing:2,justifyContent:"space-between",alignItems:{xs:"flex-start",sm:"center"},mb:3,children:[e.jsxs(n,{children:[e.jsx(x,{variant:"h5",fontWeight:600,sx:{letterSpacing:"-0.5px"},children:"Your Projects"}),e.jsx(x,{variant:"body2",color:"text.secondary",sx:{mt:.5},children:g===0?"No projects match your current filters.":`Showing ${g} project${g===1?"":"s"}`})]}),f&&e.jsx(h,{size:"small",variant:"text",onClick:A,sx:{textTransform:"none"},children:"Clear search"})]}),j===0?e.jsx(xe,{}):g===0?e.jsx(he,{reset:A}):e.jsx(n,{sx:{display:"flex",flexDirection:"column",gap:1.5,"& > *":{opacity:0,transform:"translateY(8px)",animation:"fadeSlide 0.55s ease forwards"},"& > *:nth-of-type(1)":{animationDelay:"0.02s"},"& > *:nth-of-type(2)":{animationDelay:"0.04s"},"& > *:nth-of-type(3)":{animationDelay:"0.06s"},"& > *:nth-of-type(4)":{animationDelay:"0.08s"},"@keyframes fadeSlide":{to:{opacity:1,transform:"translateY(0)"}}},children:T.map((o,s)=>e.jsx(X,{project:o,rowSx:c(s),onDelete:D,endActions:e.jsx(pe,{project:o,onDelete:D})},o.id))})]})]})})})]}),e.jsxs(se,{open:d,onClose:I,"aria-labelledby":"delete-project-title",children:[e.jsx(ne,{id:"delete-project-title",sx:{fontWeight:600},children:"Delete Project"}),e.jsx(ie,{dividers:!0,children:e.jsx(le,{component:"div",sx:{lineHeight:1.6},children:u?e.jsxs(e.Fragment,{children:["Are you sure you want to permanently delete"," ",e.jsx("strong",{children:u.name}),"? This action cannot be undone and may impact related issues or references."]}):"Are you sure?"})}),e.jsxs(ce,{sx:{px:3,py:2},children:[e.jsx(h,{onClick:I,sx:{textTransform:"none"},children:"Cancel"}),e.jsx(h,{variant:"contained",color:"error",onClick:B,sx:{textTransform:"none"},children:"Delete"})]})]})]})}const pe=r.memo(({project:t,onDelete:l})=>{const a=r.useCallback(d=>{d.stopPropagation(),E.visit(`/projects/${t.id}/edit`)},[t.id]),c=r.useCallback(d=>{l(d,t)},[l,t]);return e.jsxs(p,{direction:"row",spacing:.5,children:[e.jsx(w,{title:"Edit project",children:e.jsx(z,{size:"small",onClick:a,"aria-label":`Edit project ${t.name}`,sx:{color:"rgba(36,58,99,0.75)","&:hover":{color:"rgba(36,58,99,0.95)"}},children:e.jsx(ee,{fontSize:"small"})})}),e.jsx(w,{title:"Delete project",children:e.jsx(z,{size:"small",color:"error","aria-label":`Delete project ${t.name}`,onClick:c,sx:{opacity:.8,transition:"opacity .2s","&:hover":{opacity:1}},children:e.jsx(U,{fontSize:"small"})})})]})});function xe(){return e.jsxs(n,{sx:{py:8,px:2,textAlign:"center",color:"text.secondary"},children:[e.jsx(n,{sx:{mx:"auto",width:120,height:120,mb:3,borderRadius:"50%",background:"radial-gradient(circle at 30% 30%, rgba(0,0,0,0.05), transparent 60%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:46,opacity:.7},"aria-hidden":!0,children:"🧭"}),e.jsx(x,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"You have no projects yet"}),e.jsx(x,{variant:"body2",sx:{maxWidth:480,mx:"auto"},children:"Get started by creating your first project. Organize work, track issues, and collaborate efficiently."}),e.jsx(h,{href:"/projects/create",variant:"contained",startIcon:e.jsx(C,{}),sx:{mt:4,textTransform:"none",fontWeight:600},children:"Create your first project"})]})}function he({reset:t}){return e.jsxs(n,{sx:{py:7,px:2,textAlign:"center",color:"text.secondary"},children:[e.jsx(n,{sx:{mx:"auto",width:110,height:110,mb:3,borderRadius:"24px",background:"linear-gradient(145deg, rgba(0,0,0,0.05), transparent 70%)",display:"flex",alignItems:"center",justifyContent:"center",fontSize:40,opacity:.75},"aria-hidden":!0,children:"🔍"}),e.jsx(x,{variant:"h6",fontWeight:600,gutterBottom:!0,children:"No matching projects"}),e.jsx(x,{variant:"body2",sx:{maxWidth:480,mx:"auto"},children:"Try adjusting your search terms or reset the filters to view all projects again."}),e.jsx(h,{onClick:t,variant:"outlined",sx:{mt:3,textTransform:"none"},children:"Reset filters"})]})}export{Ct as default};
